webpackJsonp([3],{"1abX":function(t,e){},"7DCS":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("bOdI"),n=i.n(s),a=(i("jAcA"),i("86U2")),r=(i("yIEv"),i("OIh9")),c=i("DasX"),o=i("Gu7T"),l=i.n(o),h=(i("9++/"),i("QhyB")),f=(i("yffH"),i("sdMh")),u={components:{CrossLine:i("DzAj").a},props:{data:{type:Object}},methods:{getTags:function(t){var e="";return t.forEach(function(t){e+=t+" "}),e},click:function(){this.$emit("itemClick")}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"rank-list-item",on:{click:t.click}},[i("div",{staticClass:"left"},[i("img",{attrs:{src:t.data.cover}})]),t._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"title"},[t._v(t._s(t.data.name))]),t._v(" "),i("div",{staticClass:"des"},[t._v(t._s(t.data.short_description))]),t._v(" "),i("div",{staticClass:"tags"},[t._v(t._s(this.getTags(t.data.tags)))])]),t._v(" "),i("div",{staticClass:"rank"},[t._v(t._s(t.data.comic_id))])]),t._v(" "),i("cross-line")],1)},staticRenderFns:[]};var p,v,b={components:(p={RankListItem:i("VU/8")(u,d,!1,function(t){i("toOR")},"data-v-a2f9b06a",null).exports},n()(p,f.a.name,f.a),n()(p,h.a.name,h.a),p),props:{type:{type:Number}},data:function(){return{list:[],refresh:!1,loading:!1,finished:!1,page:1,period:"week"}},created:function(){this.getData()},methods:{push:function(t){this.$router.push({path:"/comics-detail",query:{data:t+""}})},refreshData:function(t){this.refresh=!0,this.period=t,this.page=1,this.getData()},onRefresh:function(){this.refresh=!0,this.page=1,this.getData()},onLoad:function(){this.loading=!0,this.page++,this.getData()},getData:function(){var t=this;this.get("v3/appV3_3/ios/phone/list/getRankComicList",{page:this.page,type:this.type,period:this.period}).then(function(e){var i;(t.refresh=!1,t.loading=!1,null!=e.returnData&&0!=e.returnData.comics.length)?t.refresh?t.list=e.returnData.comics:(i=t.list).splice.apply(i,[t.list.length,0].concat(l()(e.returnData.comics))):t.finished=!0})}}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refresh,callback:function(e){t.refresh=e},expression:"refresh"}},[i("van-list",{attrs:{finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e,s){return i("div",[i("rank-list-item",{attrs:{data:e},on:{itemClick:function(i){t.push(e.comic_id)}}})],1)}))],1)],1)},staticRenderFns:[]},y=i("VU/8")(b,m,!1,null,null,null).exports,_=(i("Au9i"),{components:(v={HeaderBar:c.a,TemplePage:y},n()(v,r.a.name,r.a),n()(v,a.a.name,a.a),v),data:function(){return{btn1Type:"default",btn2Type:"default",btn3Type:"primary",selected:"1",active:0}},methods:{tabClick:function(t){"week"==t?(this.btn3Type="primary",this.btn2Type="default",this.btn1Type="default",this.$refs.child1.refreshData(t),this.$refs.child2.refreshData(t),this.$refs.child3.refreshData(t),this.$refs.child4.refreshData(t)):"month"==t?(this.btn2Type="primary",this.btn1Type="default",this.btn3Type="default",this.$refs.child1.refreshData(t),this.$refs.child2.refreshData(t),this.$refs.child3.refreshData(t),this.$refs.child4.refreshData(t)):(this.btn1Type="primary",this.btn2Type="default",this.btn3Type="default",this.$refs.child1.refreshData(t))}}}),g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg"},[i("header-bar",{attrs:{text:"发现"}}),t._v(" "),i("div",{staticClass:"title-tab"},[i("div",{staticClass:"rank"},[t._v("排行榜")]),t._v(" "),i("div",{staticClass:"period"},[0==t.active?i("mt-button",{staticClass:"button",attrs:{size:"small",type:t.btn1Type},on:{click:function(e){t.tabClick("total")}}},[t._v("总")]):t._e(),t._v(" "),i("mt-button",{staticClass:"button",attrs:{size:"small",type:t.btn2Type},on:{click:function(e){t.tabClick("month")}}},[t._v("月")]),t._v(" "),i("mt-button",{staticClass:"button",attrs:{size:"small",type:t.btn3Type},on:{click:function(e){t.tabClick("week")}}},[t._v("周")])],1)]),t._v(" "),i("van-tabs",{staticClass:"tab",attrs:{type:"card",swipeable:"",duration:5},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[i("van-tab",{attrs:{title:"圣殿榜"}},[i("temple-page",{ref:"child1",attrs:{type:2}})],1),t._v(" "),i("van-tab",{attrs:{title:"成长榜"}},[i("temple-page",{ref:"child2",attrs:{type:18}})],1),t._v(" "),i("van-tab",{attrs:{title:"订阅榜"}},[i("temple-page",{ref:"child3",attrs:{type:21}})],1),t._v(" "),i("van-tab",{attrs:{title:"新作榜"}},[i("temple-page",{ref:"child4",attrs:{type:19}})],1)],1)],1)},staticRenderFns:[]};var k=i("VU/8")(_,g,!1,function(t){i("1abX")},"data-v-40702f98",null);e.default=k.exports},"86U2":function(t,e,i){"use strict";var s=i("9JZw"),n=i("pNHv"),a=i("sM86"),r=i("KwZk"),c=i("vwLT");e.a=Object(s.a)({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.b([t.type])},[i("div",{ref:"wrap",class:[t.b("wrap",[t.position,{scrollable:t.scrollable}]),{"van-hairline--top-bottom":"line"===t.type}]},[i("div",{ref:"nav",class:t.b("nav",[t.type])},["line"===t.type?i("div",{class:t.b("line"),style:t.lineStyle}):t._e(),t._l(t.tabs,function(e,s){return i("div",{ref:"tabs",refInFor:!0,staticClass:"van-tab",class:{"van-tab--active":s===t.curActive,"van-tab--disabled":e.disabled},on:{click:function(e){t.onClick(s)}}},[i("span",{ref:"title",refInFor:!0,staticClass:"van-ellipsis"},[t._v(t._s(e.title))])])})],2)]),i("div",{ref:"content",class:t.b("content")},[t._t("default")],2)])},name:"tabs",mixins:[c.a],model:{prop:"active"},props:{sticky:Boolean,lineWidth:Number,swipeable:Boolean,active:{type:[Number,String],default:0},type:{type:String,default:"line"},duration:{type:Number,default:.2},swipeThreshold:{type:Number,default:4}},data:function(){return{tabs:[],position:"content-top",curActive:0,lineStyle:{},events:{resize:!1,sticky:!1,swipeable:!1}}},computed:{scrollable:function(){return this.tabs.length>this.swipeThreshold}},watch:{active:function(t){t!==this.curActive&&this.correctActive(t)},tabs:function(t){this.correctActive(this.curActive||this.active),this.setLine()},curActive:function(){this.scrollIntoView(),this.setLine(),"page-top"!==this.position&&"content-bottom"!==this.position||r.a.setScrollTop(this.scrollEl,r.a.getElementTop(this.$el))},sticky:function(){this.handlers(!0)},swipeable:function(){this.handlers(!0)}},mounted:function(){var t=this;this.correctActive(this.active),this.setLine(),this.$nextTick(function(){t.handlers(!0),t.scrollIntoView()})},activated:function(){var t=this;this.$nextTick(function(){t.handlers(!0)})},deactivated:function(){this.handlers(!1)},beforeDestroy:function(){this.handlers(!1)},methods:{handlers:function(t){var e=this.events,i=this.sticky&&t,s=this.swipeable&&t;if(e.resize!==t&&(e.resize=t,(t?a.b:a.a)(window,"resize",this.setLine,!0)),e.sticky!==i&&(e.sticky=i,this.scrollEl=this.scrollEl||r.a.getScrollEventTarget(this.$el),(i?a.b:a.a)(this.scrollEl,"scroll",this.onScroll,!0),this.onScroll()),e.swipeable!==s){e.swipeable=s;var n=this.$refs.content,c=s?a.b:a.a;c(n,"touchstart",this.touchStart),c(n,"touchmove",this.touchMove),c(n,"touchend",this.onTouchEnd),c(n,"touchcancel",this.onTouchEnd)}},onTouchEnd:function(){var t=this.direction,e=this.deltaX,i=this.curActive;"horizontal"===t&&this.offsetX>=50&&(e>0&&0!==i?this.setCurActive(i-1):e<0&&i!==this.tabs.length-1&&this.setCurActive(i+1))},onScroll:function(){var t=r.a.getScrollTop(this.scrollEl),e=r.a.getElementTop(this.$el),i=e+this.$el.offsetHeight-this.$refs.wrap.offsetHeight;this.position=t>i?"content-bottom":t>e?"page-top":"content-top"},setLine:function(){var t=this;this.$nextTick(function(){if(t.$refs.tabs&&"line"===t.type){var e=t.$refs.tabs[t.curActive],i=t.lineWidth||e.offsetWidth,s=e.offsetLeft+(e.offsetWidth-i)/2;t.lineStyle={width:i+"px",transform:"translateX("+s+"px)",transitionDuration:t.duration+"s"}}})},correctActive:function(t){t=+t;var e=this.tabs.some(function(e){return e.index===t}),i=(this.tabs[0]||{}).index||0;this.setCurActive(e?t:i)},setCurActive:function(t){this.curActive=t,this.$emit("input",t)},onClick:function(t){var e=this.tabs[t],i=e.title;e.disabled?this.$emit("disabled",t,i):(this.$emit("click",t,i),this.setCurActive(t))},scrollIntoView:function(){if(this.scrollable&&this.$refs.tabs){var t=this.$refs.tabs[this.curActive],e=this.$refs.nav,i=e.scrollLeft,s=e.offsetWidth,n=t.offsetLeft,a=t.offsetWidth;this.scrollTo(e,i,n-(s-a)/2)}},scrollTo:function(t,e,i){var s=0,a=Math.round(1e3*this.duration/16);!function r(){t.scrollLeft+=(i-e)/a,++s<a&&Object(n.a)(r)}()},renderTitle:function(t,e){var i=this;this.$nextTick(function(){var s=i.$refs.title[e];s.parentNode.replaceChild(t,s)})}}})},OIh9:function(t,e,i){"use strict";var s=i("9JZw");e.a=Object(s.a)({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isSelected,expression:"isSelected"}],class:t.b("pane")},[t.inited?t._t("default"):t._e(),t.$slots.title?i("div",{ref:"title"},[t._t("title")],2):t._e()],2)},name:"tab",mixins:[{data:function(){return{parent:null}},methods:{findParent:function(t){for(var e=this.$parent;e;){if(e.$options.name===t){this.parent=e;break}e=e.$parent}}}}],props:{title:String,disabled:Boolean},data:function(){return{inited:!1}},computed:{index:function(){return this.parent.tabs.indexOf(this)},isSelected:function(){return this.index===this.parent.curActive}},watch:{"parent.curActive":function(){this.inited=this.inited||this.isSelected},title:function(){this.parent.setLine()}},created:function(){this.findParent("van-tabs"),this.parent.tabs.push(this)},mounted:function(){this.$slots.title&&this.parent.renderTitle(this.$refs.title,this.index)},destroyed:function(){this.parent.tabs.splice(this.index,1)}})},jAcA:function(t,e,i){"use strict";var s=i("f4F5");i.n(s)},mx3f:function(t,e){},pNHv:function(t,e,i){"use strict";(function(t){e.a=function(t){return r.call(a,t)};var s=i("o69Z"),n=Date.now();var a=s.e?t:window,r=a.requestAnimationFrame||a.webkitRequestAnimationFrame||function(t){var e=Date.now(),i=Math.max(0,16-(e-n)),s=setTimeout(t,i);return n=e+i,s};a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.clearTimeout}).call(e,i("DuR2"))},toOR:function(t,e){},yIEv:function(t,e,i){"use strict";var s=i("f4F5"),n=(i.n(s),i("mx3f"));i.n(n)}});
//# sourceMappingURL=3.bc172e34f49efc334fd0.js.map